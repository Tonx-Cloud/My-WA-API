# Configuração de Produção - My-WA-API
# Complete todas as variáveis antes de executar o setup

# ========================================
# APLICAÇÃO PRINCIPAL
# ========================================
NODE_ENV=production
PORT=3000
HOST=0.0.0.0
VERSION=2.0.0
TZ=America/Sao_Paulo

# ========================================
# URLs BASE
# ========================================
API_BASE_URL=https://api.yourdomain.com
WEB_BASE_URL=https://app.yourdomain.com

# ========================================
# DOMÍNIO E SSL
# ========================================
# Domínio principal da aplicação
DOMAIN=api.mywaapi.com
# Token da API do Cloudflare (para DNS challenge)
CLOUDFLARE_API_TOKEN=your_cloudflare_token_here
# Zone ID do domínio no Cloudflare
CLOUDFLARE_ZONE_ID=your_zone_id_here
# Email para certificados Let's Encrypt
SSL_EMAIL=admin@mywaapi.com

# ========================================
# SEGURANÇA - DEFINA VALORES ÚNICOS!
# ========================================
JWT_SECRET=my-super-secret-jwt-key-change-this-in-production
ENCRYPTION_KEY=my-32-char-encryption-key-12345678
NEXTAUTH_SECRET=my-super-secret-nextauth-key-change-this-too
API_KEY_ADMIN=admin-api-key-change-this
API_KEY_READONLY=readonly-api-key-change-this

# ========================================
# BANCO DE DADOS POSTGRESQL
# ========================================
DATABASE_URL=postgresql://mywaapi:secure-postgres-password@postgres:5432/mywaapi
DB_HOST=postgres
DB_PORT=5432
DB_NAME=mywaapi
DB_USER=mywaapi
DB_PASS=secure-postgres-password

# ========================================
# REDIS CACHE
# ========================================
REDIS_URL=redis://redis:6379
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=your_redis_password_here

# ========================================
# WHATSAPP CONFIGURAÇÕES
# ========================================
WHATSAPP_SESSION_PATH=/app/sessions
WHATSAPP_WEBHOOK_URL=https://api.yourdomain.com/webhooks
WHATSAPP_TIMEOUT=30000

# ==========================================
# CONFIGURAÇÕES DE SEGURANÇA
# ==========================================
RATE_LIMIT_WINDOW=900000
RATE_LIMIT_MAX=100
CORS_ORIGIN=https://app.yourdomain.com
CORS_CREDENTIALS=true

# IP Whitelist (separado por vírgula)
IP_WHITELIST=127.0.0.1,::1

# Rate limiting específico
API_RATE_LIMIT=1000
WEB_RATE_LIMIT=2000

# ==========================================
# LOGGING E MONITORAMENTO
# ==========================================
LOG_LEVEL=info
LOG_FILE=true
LOG_CONSOLE=true
LOG_MAX_SIZE=10m
LOG_MAX_FILES=5

# Métricas e tracing
ENABLE_METRICS=true
ENABLE_TRACING=true
METRICS_PORT=9090

# ========================================
# BACKUP PARA CLOUD
# ========================================
# Configurações gerais de backup
BACKUP_ENABLED=true
BACKUP_RETENTION_DAYS=30
BACKUP_COMPRESSION=true
BACKUP_ENCRYPTION=true
BACKUP_ENCRYPTION_KEY=your_32_character_encryption_key

# AWS S3
AWS_S3_ENABLED=true
AWS_S3_BUCKET=mywaapi-backups
AWS_REGION=us-east-1
# Configure AWS credentials via: aws configure

# Google Cloud Storage
GCS_ENABLED=true
GCS_BUCKET=mywaapi-backups-gcs
GCS_PROJECT=your-gcp-project-id
# Configure GCS credentials via: gcloud auth login

# ========================================
# SISTEMA DE ALERTAS
# ========================================
# Configurações gerais
ALERTS_ENABLED=true
ALERTS_RATE_LIMIT=5
ESCALATION_ENABLED=true
ESCALATION_TIMEOUT=30

# Slack
SLACK_ENABLED=true
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
SLACK_CHANNEL=#alerts

# Discord
DISCORD_ENABLED=true
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/YOUR/WEBHOOK/URL

# Email (SMTP)
EMAIL_ENABLED=true
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=alerts@mywaapi.com
SMTP_PASS=your_app_password_here
EMAIL_FROM=alerts@mywaapi.com
EMAIL_TO=admin@mywaapi.com

# WhatsApp (usando própria API)
WHATSAPP_ENABLED=true
WHATSAPP_INSTANCE=default
WHATSAPP_NUMBER=5511999999999

# ========================================
# MONITORAMENTO
# ========================================
# Grafana
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=your_grafana_password_here

# Prometheus
PROMETHEUS_RETENTION=30d
PROMETHEUS_SCRAPE_INTERVAL=15s
BACKUP_COMPRESSION=true

# S3 para backup (opcional)
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_REGION=us-east-1
S3_BUCKET=my-wa-api-backups

# ==========================================
# CONFIGURAÇÕES DE EMAIL (opcional)
# ==========================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-email-password
EMAIL_FROM=noreply@yourdomain.com

# ==========================================
# PORTAS EXTERNAS (Docker Compose)
# ==========================================
API_PORT=3000
WEB_PORT=3001
DB_PORT_EXTERNAL=5432
REDIS_PORT_EXTERNAL=6379
HTTP_PORT=80
HTTPS_PORT=443

# ==========================================
# CONFIGURAÇÕES SSL/TLS
# ==========================================
SSL_ENABLED=true
SSL_CERT_PATH=/etc/nginx/ssl/cert.pem
SSL_KEY_PATH=/etc/nginx/ssl/key.pem

# ==========================================
# GITHUB OAUTH (para autenticação)
# ==========================================
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret

# ==========================================
# GOOGLE OAUTH (para autenticação)
# ==========================================
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret

# ==========================================
# CONFIGURAÇÕES DE DESENVOLVIMENTO
# ==========================================
DEBUG=false
VERBOSE_LOGGING=false
ENABLE_SWAGGER=false

# ==========================================
# CONFIGURAÇÕES DE PERFORMANCE
# ==========================================
MAX_CONCURRENT_SESSIONS=50
SESSION_TIMEOUT=3600000
CLEANUP_INTERVAL=300000

# Worker processes
WORKER_PROCESSES=auto
WORKER_CONNECTIONS=1024

# ==========================================
# CONFIGURAÇÕES DO DOCKER
# ==========================================
COMPOSE_PROJECT_NAME=my-wa-api
DOCKER_RESTART_POLICY=unless-stopped
DOCKER_BUILDKIT=1

# Registry para imagens
DOCKER_REGISTRY=ghcr.io
IMAGE_TAG=latest
VERSION=latest

# ==========================================
# CONFIGURAÇÕES DE WEBHOOK
# ==========================================
WEBHOOK_SECRET=your-webhook-secret-key
WEBHOOK_TIMEOUT=30000
WEBHOOK_RETRIES=3

# ==========================================
# CONFIGURAÇÕES DE UPLOAD
# ==========================================
UPLOAD_MAX_SIZE=10485760
UPLOAD_ALLOWED_TYPES=image/jpeg,image/png,image/gif,application/pdf
UPLOAD_PATH=/app/uploads

# ==========================================
# CONFIGURAÇÕES DE NOTIFICAÇÃO
# ==========================================
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/YOUR/DISCORD/WEBHOOK

# ==========================================
# CONFIGURAÇÕES DE TIMEZONE
# ==========================================
DEFAULT_TIMEZONE=America/Sao_Paulo
DATE_FORMAT=DD/MM/YYYY HH:mm:ss

# ==========================================
# CONFIGURAÇÕES DE CACHE
# ==========================================
CACHE_TTL=3600
CACHE_PREFIX=mywaapi:
CACHE_COMPRESSION=true

# ==========================================
# CONFIGURAÇÕES DE API EXTERNA
# ==========================================
# Adicione aqui configurações para APIs externas que você utiliza
# EXTERNAL_API_KEY=your-external-api-key
# EXTERNAL_API_URL=https://api.external-service.com

# ==========================================
# CONFIGURAÇÕES DE CLUSTER (se aplicável)
# ==========================================
CLUSTER_MODE=false
CLUSTER_WORKERS=auto
CLUSTER_PORT_RANGE=3000-3010

# ==========================================
# CONFIGURAÇÕES DE HEALTHCHECK
# ==========================================
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10
HEALTH_CHECK_RETRIES=3
HEALTH_CHECK_START_PERIOD=60
